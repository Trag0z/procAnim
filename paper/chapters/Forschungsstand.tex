\chapter{Forschungsstand}
Das folgende Kapitel gibt einen Überblick über bestehende Literatur, die für das hier vorgestellte Animationssystem relevant ist. Zuerst werden dabei die Arbeiten zu prozeduralen Animationssystemen vorgestellt. Da sich die meisten dieser Beiträge mit Bewegungen im dreidimensionalen Raum beschäftigen, können ihre Ergebnisse leider nur beschränkt auf diese Arbeit übertragen werden. Im zweiten Teil wird dann der Forschungsstand zur skelettbasierten Animation von zweidimensionalen Objekten erläutert. Zuletzt wird dann beschrieben, wie sich diese Arbeit in den Kontext der bestehenden Forschung einfügt und welchen Beitrag sie leisten soll.


\section{Prozedurale Laufanimation}
Da Laufbewegungen einen der wohl häufigsten Bewegungsabläufe von Menschen darstellen, gibt es eine lange Reihen von Arbeiten zum Problem der Animation von menschlichen Laufbewegungen. In vielen Fällen werden die beschriebenen Animationen dabei einmalig erstellt und dann genau so abgespielt und aufgezeichnet (beispielsweise für computergenerierte Charaktere in einem Film). Da Videospiele ein interaktives Medium sind, ist es zur Anwendung in Spielen jedoch oft wichtig, dass die Animationen noch zur Laufzeit des Programms an das gewünschte Verhalten angepasst werden können. Grob können drei verschiedene Ansätze verwendet werden, um Bewegungen zur Laufzeit zu erstellen: Prozedurale Bewegung (auch algorithmische Bewegung), beispielbasierte Bewegung und dynamisch-simulierte Bewegung \cite{johansen2009automated}.

Systeme zur prozeduralen Bewegung verwenden ein Verständnis für die Bewegungsabläufe von Charakteren, um neue Bewegungen spontan generieren zu können. Beispielbasierte Ansätze hingegen schöpfen aus einer Reihe von zuvor erstellten Animationen und kombinieren diese, um neue Bewegungsabläufe zu erstellen. Bisweilen kommen dabei auch noch prozedurale Techniken zum Einsatz, um die kombinierten Animationen weiter an die benötigte Situation anzupassen. Dynamische Simulationen hingegen berechnen ein physikalisches Modell des Charakters und seiner Umgebung und versuchen so, realistische Bewegungen zu erstellen. Als Grundlage können dabei auch Beispielanimationen oder prozedural erstellte Bewegungen verwendet werden.

Einen Ansatz zur prozeduralen Generierung von Laufbewegungen in Echtzeit beschrieben Bruderlin und Calvert\cite{bruderlin1993interactive}\cite{bruderlin1996knowledge}. Sie simulierten die grundlegende Bewegung der Beine als wären sie ein umgekehrtes Pendel und approximierten die Flugbahn des Torsos in der Luft mit einer Parabel. Ihr System bietet dem Nutzer eine große Anzahl von Variablen zur Beeinflussung der Animation und ermöglicht so viele verschiedene, ausdrucksstarke Bewegungen, trotz ihrer rein synthetischen Natur. Es sind aber nur Bewegungen auf ebenen Untergründen möglich.

Ein weiteres Team um Bruderlin\cite{bruderlin1994procedural} entwickelte das \textit{Life Forms} System zur Animation von menschlichen Figuren im dreidimensionalen Raum. Sie verwenden dabei Inverse Kinematics, um die Figuren mit ihren Händen nach Objekten greifen zu lassen. Die Bewegungen der anderen daran beteiligten Körperteile wie Arm und Schulter werden dabei durch die Knochen und die für diese zuvor festgelegte Beschränkungen errechnet. Außerdem bietet ihre Anwendung die Möglichkeit zur prozeduralen Erstellung von Laufbewegungen. Dabei werden als Hauptparameter die Schrittweite und Schrittfrequenz (und daraus resultieren die Laufgeschwindigkeit) vom Nutzer angegeben. Das Programm erstellt dann vier Kontrollpunkte für einen Schritt in der Laufbewegung: Den Anfang, das Ende und dazwischen die beiden Zeitpunkte, an denen die Hüfte am höchsten bzw. am niedrigsten ist. Daraufhin wird eine kubische Spline-Kurve berechnet, die durch diese vier Punkte verläuft. Die Position der Hüfte des Modells wird dann entlang dieser Kurve interpoliert und die Stellung der Beine dazu passend berechnet.

Diesem Problem des unebenen Terrains widmeten sich Chung und Kollegen\cite{chung1999animation}. Die von ihnen entwickelten Algorithmen ermöglichen die automatische Bewegung über Untergründe verschiedener Höhe, während die verwendete Collision Detection dafür sorgt, dass die Beine dabei nicht durch Hindernisse bewegt werden. Außerdem gibt es ein hierarchisches System von Stellschrauben, die zur Justierung der Animation genutzt werden können.

Johansen\cite{johansen2009automated} entwickelte ein System zur Fortbewegungsanimation von 3D-Charakteren, das prozedurale Verfahren mit beispielbasierten Ansätzen verbindet. Er nutzte dabei nur zwei verschiedene Beispielanimationen – bei einer läuft der Charakter geradeaus, bei der anderen bewegt er sich zur Seite – unter der Annahme, dass sich aus diesen beiden Bewegungen alle anderen synthetisieren lassen würden. Die Resultate dieses Schritts werden dann prozedural mittels Inverse Kinematics an die Höhe und den Winkel des Untergrunds angepasst, sodass der Charakter auch über Stufen oder schräge Flächen laufen kann. Die Ergebnisse dieses Systems wirken dabei durchweg glaubhaft.

Auf dieser Arbeit aufbauend versuchte Shapiro\cite{shapiro2011building}, variablere, ausdrucksstärkere Animationen mit einem ähnlichen Funktionsspektrum zu erreichen, indem er dem System mit 19 Exemplaren eine größere Menge an Beispielanimationen zur Verfügung stellte, um den prozeduralen Bestandteil und Inverse Kinematics aus dem Verfahren entfernen zu können (und trotzdem noch alle verschiedenen Bewegungsmöglichkeiten abzudecken). Er beschreibt die Resultate seiner Arbeit als realistischer, die Erstellung der vielen Beispielanimationen sorgt aber für einen wesentlich größeren Aufwand, wenn das System in Projekten verwendet werden soll.

\section{Skelettbasierte Animation von 2D-Objekten}
Einen der frühen Versuche, skelettbasierte Animation für die Bewegungen zweidimensionaler Charaktere zu verwenden, stellten Burtnyk und Wein\cite{burtnyk1976interactive} vor. Bis dahin wurden häufig Keyframes von Animationen gezeichnet und die restlichen Bilder durch Interpolation dieser Keyframes erzeugt. Dieses System erlaubte jedoch nur geradlinige Bewegung in gleich großen Schritten zwischen den Keyframes. Die Autoren führten ein Skelett in das Animationssystem ein, das es erlaubte, mit verhältnismäßig wenig Aufwand eine hohe Anzahl von Keyframes zu erstellen, da nur die simple Strichmännchen-Repräsentation dieser Knochen neu gezeichnet werden musste. Das finale Bild wird dann anhand dieser Knochen in entsprechende Posen verzerrt.

Van Overveld\cite{van1990technique} beschrieben ein Verfahren zur 2D-Animation vor, bei dem das Skelett vom Rest des Objekts getrennt wurde. Das Skelett bzw. einige seiner Punkte wurden dann prozedural in Echtzeit animiert und die Bewegungen der restlichen Punkte dynamisch simuliert. Die beschränkenden Kräfte auf das Skelett wurden bei dieser Simulation erst nur approximiert und später dann korrigiert, um eine Performance zu erreichen, die schnell genug für eine Darstellung in Echtzeit ist.

Auf diesem Artikel aufbauend entwickelten Aoki et al.\cite{aoki1999dynamic} ein Verfahren zur realistischen Animation von Pflanzen, die vom Wind bewegt werden. Sie verwendeten dazu digital erstellte Bilder von Pflanzen und versahen sie per Hand mit Skeletten. Diesen Skeletten wurden dann mechanische Eigenschaften zugewiesen, mit denen die Simulation im letzten Schritt arbeitete. Sie beschreiben ihre Ergebnisse als sehr realistisch, mehr als zwei im Artikel enthaltene Beispielbilder konnten aber nicht gefunden werden.

Ein noch nicht lange zurückliegendes Paper von Pangesti und Kollegen\cite{pangesti2019analysis} beschreibt die Entwicklung eines Verfahrens zur einfacheren Erstellung von Laufanimationen für 2D-Charaktere mithilfe eines Skeletts und Inverse Kinematics. Außerdem war ein weiteres erklärtes Ziel ihrer Arbeit, eine Animation für das Umkehren während des Laufens zu erzeugen. Durch die Analyse von Laufbewegungen echter Menschen bestimmten sie die Freiheitsgrade der verschiedenen Knochen und wendeten diese auf das virtuelle Skelett an. So wird automatisiert verhindert, dass beispielsweise ein Ellenbogen in die falsche Richtung geknickt wird. Ein Animator kann dann Keyframes festlegen, denen der Körper des Modells folgen soll, ohne dass dadurch Fehlstellungen entstehen können. Die Arbeit demonstriert dieses Verfahren zuletzt dann noch mit einer Animation für das Umkehren des Charakters während der Laufbewegung. Bemerkenswert dabei ist, dass das verwendete Modell dreidimensional ist und dann gerendert wird, um die Frames für die finale, zweidimensionale Animation zu erzeugen.


\section{Einordnung in die bestehende Literatur}
Um die Animationen des Charakters präzise an die Gegebenheiten des Untergrunds anzupassen, auf dem der Charakter sich bewegt, ist entweder ein (teilweiser) prozeduraler Ansatz oder eine dynamische Simulation vonnöten. Da dynamische Simulationen aufgrund ihrer physikalischen Modelle meist einen höheren Rechenaufwand mit sich bringen und außerdem nur realistische Bewegungsabläufe generieren können (was nicht Ziel dieser Arbeit ist – die Bewegungen sollen nur glaubhaft aussehen), werden diese Ansätze hier nicht weiter verfolgt. Ideen der beispielbasierten Animation, speziell die Interpolation zwischen mehreren zuvor erstellten Bewegungsabläufen, könnten dabei helfen, Laufbewegungen individueller und ausdrucksstärker erscheinen zu lassen und außerdem die Komplexität des prozeduralen Systems durch ihre Bewegungsvorgaben reduzieren.

Die hier beschriebenen Beiträge zur skelettbasierten Animation von 2D-Charakteren hatten meist nicht zum Ziel, in interaktiven System verwendet zu werden. Sie sollten viel mehr Animatoren als Werkzeug zu dienen, das den Animationsprozess vereinfacht. Das in dieser Arbeit vorgestellte System soll speziell für die Anwendung in Videospielen erstellt werden. Dass die generierten Animationen durch die Eingaben des Spielers maßgeblich beeinflusst werden bedeutet dabei auch, dass die Designer nicht die Möglichkeit haben, Animationen per Hand zu korrigieren, bevor der Spieler sie zu Gesicht bekommt. Somit sollte möglichst gewährleistet werden, dass die Animationen ein vorhersagbares Verhalten zeigen. Sie sollen sich also an die Eingaben des Spielers anpassen, dabei aber nicht zu grob von der von Animator geplanten Bewegung abweichen.

Außerdem soll durch das Erstellen und darauf folgende Animieren eines einzelnen 2D-Sprites der Designaufwand minimiert werden. Pangesti et al.\cite{pangesti2019analysis} verwendeten zwar skelettbasierte Verfahren, um 2D-Aniamtionen zu erstellen, der dem zugrunde liegende Charakter ist aber ein dreidimensionales Modell, was sowohl die Erstellung des Modells als auch das Animationssystem wesentlich komplizierter macht. Einen der großen Vorteile dabei demonstrierten sie aber auch in ihrer Arbeit: Es kann eine Animation für das Umkehren des Charakters erstellt werden, bei der die Körperteile sich realistisch verdecken. Diese Möglichkeit fällt bei der Verwendung von Sprites weg, da das System keine Informationen über die Tiefenverhältnisse der Körperteile hat. Demnach stellt dies eine Limitierung des hier präsentierten Systems vor.

Da die Idee dieser Arbeit darauf basiert, Techniken aus der 3D Charakter-Animation auf 2D-Charaktere zu übertragen, können viele der Erkenntnisse aus der Forschung zur Bewegungsanimation in 3D häufig übertragen werden. Dazu zählen unter Anderem Collision Detection wie bei Chung et al.\cite{chung1999animation} oder die Kombination von prozeduraler Planung der Schritte mit vorgefertigten Beispielanimationen, wie sie von Johansen\cite{johansen2009automated} demonstriert wurde.